---
layout: post
title: malloc lab - 삽질은 즐거워
date: 2025-10-29 21:04:00
description:
tags: 
categories: 크래프톤 정글
---

## malloc lab

정글 7주차 malloc lab을 진행했다 직접 malloc, realloc, free를 구현하며 동적 메모리 할당에 대해 알아가는 시간이였다. 여러 시행착오가 있었지만 가장 기억이 남았던 디버깅 경험을 풀어보려 한다.

## 이게 왜 안됨?

코드를 짜다보면 분명 잘 짰는데 안되는 상황이 온다. malloc lab같은 경우 구현을 직접 해야하는 과제이다 보니
그러한 상황이 더 많이 나왔다.  
malloc lab은 특별한 변수들이 있는게 아니라 메모리에 직접 할당이 되기에 변수를 따라가며 디버깅 하기가 힘들었다. 그래서 안되면 코드를 훑어보고 AI에게 도움을 청하는 일이 많았다.  
내 코드가 개성이 넘치는건지 내가 프롬포팅을 못하는건지 명시적 동적 메모리 할당을 구현하는데 유독 애를 먹었다. AI또한 무의미한 답변만 주고 도움이 되지 않았다.

## 삽질

결국 코드를 하나하나 따라가며 삽질을 하기로 했다.
변수가 아니라 메모리를 봐야하기 때문에 직접 메모리를 보며 코드진행에 따라 메모리가 정상적으로 할당되는지 보았다. 이렇게 메모리 하나씩 보니 설정했던 헤더, 푸터 등이 정상적으로 할당되는게 보이니 신기했다.

![사진과 같이 헤더, 푸터, 포인터 등이 정상적으로 할당이 되었는지 확인한다.](/assets/img/blog/malloc-memory.png){:.w-50}

사진과 같이 헤더, 푸터, 포인터 등이 정상적으로 할당이 되었는지 확인한다.

## 원인/결과

![image.png](/assets/img/blog/malloc-memory2.png)

디버깅을 하다보니 메모리가 이상하게 움직이는 부분을 발견할 수 있었다!  
malloc을 진행하는데 footer부분의 값이 사라지는 것이다!
그렇기에 footer값을 못들고오고 병합과정에서 에러가 났던 것이였다.

왜 값이 사라지는지 디버깅을 진행하자

![image.png](/assets/img/blog/malloc-testcode.png){:.w-50}

테스트 코드에서 실행 후 확보한 메모리에 특정한 값을 넣는다는 걸 알았다.
값을 넣으면서 나의 footer가 덮어 씌워진 것이다. 즉 내가 size조절을 못하여 footer가 덮어 씌워지는 상황이 발생한 것이였다.

## 바이브 디버깅

이렇게 직접 디버깅을 하여 문제를 해결하니 여러 느낀점이 많았다.
해결하려고 AI한테 질문을 많이 했지만 고민만 잔뜩하고 제대로된 해결책은 안주고 결국 사람이 완벽히 이해하고 분석해야 한다는 것이다.

![image.png](/assets/img/blog/바이브디버깅.png)

물론 malloc lab을 하면서 AI에게 많은 도움을 받았다. 구현이나 디버깅을 하면서 모르는 부분을 잘 알려주고 예측하지 못한 부분의 문제를 잘 지적해 주기도 한다.
하지만 가끔 이런 상황이 오는 것 같다. 결국 사람이 코드를 이해 해야하는 것이다.

오랜시간 삽질을 했지만 삽질한 시간은 나의 경험이 되는 것 같다.
AI가 발전하며 AI를 잘 써야한다지만 역설적으로 이러한 **삽질**의 경험이 있는 개발자가 필요한거 아닐까 라는 생각도 든다.
